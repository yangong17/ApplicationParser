
{% extends "layout.html" %}

{% block content %}

<h2>Form Parser V1.0</h2>
<p style="margin-bottom: 100px;">Employee Information Sheets → Data Extraction → Exported as .csv</p>

<form action="/upload" method="post" enctype="multipart/form-data">
    <!-- Upload PDF -->
    <div class="form-group">
        <label for="pdf">Upload PDF:</label>
        <input type="file" class="form-control-file" id="pdf" name="file" accept=".pdf">
    </div>

    <!-- Submit Button for Upload -->
    <input type="submit" name="upload" value="Upload" class="btn btn-success">

    <!-- Button for Extract Key-Value Pairs -->
    <button type="submit" formaction="/execute" class="btn btn-secondary mt-3">Extract Key-Value Pairs</button>
</form>

<!-- Confirmation Message -->
{% if msg %}
<p class="alert alert-success mt-3">{{ msg }}</p>
<script>
    $("#pdf").attr("disabled", "disabled");  // Disable the file input
    $("input[type='submit']").attr("disabled", "disabled");  // Disable the upload button
</script>
{% endif %}


<!-- Download File Button -->
<div class="mt-3">
    <a href="/download/filename_here" class="btn btn-success">Download Processed File</a>
</div>

<div class="mt-5">
    <h4>Extracted Data:</h4>
    <ul>
    {% if extracted_data %}
        {% for key, value in extracted_data.items() %}
            <li>{{ key }}: {{ value }}</li>
        {% endfor %}
    {% else %}
        <li>No data extracted yet.</li>
    {% endif %}
    </ul>
</div>


{% endblock %}
